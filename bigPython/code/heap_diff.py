heap_before = """
stack: 1024 out of 15360
GC: total: 64000, used: 5248, free: 58752, max new split: 8257536
 No. of 1-blocks: 34, 2-blocks: 12, max blk sz: 53, max free sz: 3106
GC memory layout; from 3c170f00:
00000000: h=hLhh.BMBSDhThh=hhh=================hh=======h=======h=h.hS.SB=
00000400: .B........hh==..Sh=Shh=S........h=h=h===h=ShSh=h=h==============
00000800: =.BB..h=======h==========h===============BBh==...h==============
00000c00: .........Sh=====h=.............hh===============================
00001000: =====================h========..........................h=======
00001400: ===========.....................................................
       (3 lines all free)
00002400: ..........................h======.....h=======================..
00002800: .............h=======...........................................
00002c00: ........................................h==.....................
00003000: ................................................................
00003400: ..h===.............................h===h===h==================..
       (48 lines all free)
0000f800: ................................"""

heap_after = """
stack: 1024 out of 15360
GC: total: 64000, used: 5440, free: 58560, max new split: 8257536
 No. of 1-blocks: 40, 2-blocks: 13, max blk sz: 53, max free sz: 3050
GC memory layout; from 3c170f00:
00000000: h=hLhh.BMBSDhThh=hhh=================.h=======h=======h=h.hShS..
00000400: hB....Sh=Shh==h=....hh=SBBBhhhh=h=h=h===.......h=h==============
00000800: =S..hSh=======h==========h===============..h==h=hh==============
00000c00: BB.B=....Sh=====...............hh===============================
00001000: =====================h========..........................h=======
00001400: ===========.....................................................
       (3 lines all free)
00002400: ..........................h======.....h=======================..
00002800: .............h=======...h=......................................
00002c00: ................................................................
00003000: ....h===........................................................
00003400: .......................h==......................................
00003800: .......................h===h===h===h==================..........
       (47 lines all free)
0000f800: ................................"""


def string_diff(str1:str, str2:str, keep_list:list, same:bool=False) -> str:
    out = ""

    for i, letter in enumerate(str1):
        buf = ""

        # different length
        if i >= len(str2):
            buf = "&"
        
        # letter from keep list
        elif letter in keep_list:
            buf = letter

        # difference
        elif letter == str2[i]:
            buf = letter if same else " "
        else:
            buf = " " if same else letter

        out += buf

    return out


keep = ['\n', ' ', ':', ',', '(', ')', ' ', ' ', ' ']

equal = string_diff(heap_before, heap_after, keep, True)

diff_before = string_diff(heap_before, heap_after, keep)

diff_after = string_diff(heap_after, heap_before, keep)

print(equal)
print("\n")
print(diff_before)
print("\n")
print(diff_after)
